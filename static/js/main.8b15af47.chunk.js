(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{120:function(t,e,r){"use strict";r.r(e);var n,c,a=r(0),i=r.n(a),o=(r(90),r(10)),s=r.n(o),d=r(47),u=r(33),l=r(153),j=r(154),p=r(148);!function(t){t.Goods="/test--shop-with-goods",t.Cart="/cart"}(n||(n={})),function(t){t[t.Empty=0]="Empty",t[t.OneUnit=1]="OneUnit"}(c||(c={}));var b,m=r(2),h=Object(a.memo)((function(t){var e=t.picture,r=t.name,n=t.price,i=t.id,o=t.toPurchase,s=t.onRemoveProductInCart,d=t.onDeleteProductFromCart,u=t.onAddItemToCart,l=Object(a.useCallback)((function(){s(i)}),[i]),j=Object(a.useCallback)((function(){d(i)}),[i]),b=Object(a.useCallback)((function(){u(i)}),[i]);return Object(m.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(m.jsx)("img",{src:e,alt:"product_photo",style:{width:"150px",height:"150px"}}),Object(m.jsx)("div",{children:Object(m.jsx)("p",{children:r})}),Object(m.jsx)("div",{children:Object(m.jsx)("p",{children:n})}),Object(m.jsxs)("div",{style:{display:"flex"},children:[o>c.OneUnit?Object(m.jsx)(p.a,{variant:"contained",color:"primary",onClick:l,children:"-"}):Object(m.jsx)(p.a,{variant:"contained",color:"primary",onClick:j,children:"-"}),Object(m.jsx)("div",{style:{padding:"10px"},children:o}),Object(m.jsx)(p.a,{variant:"contained",color:"primary",onClick:b,children:"+"})]})]})})),f=r(31),O=r(19),x=r(46),v=r(80),y=r(40),C=r.n(y),g=r(53),P=r(76),A=r.n(P).a.create({baseURL:"https://test-shop-az.herokuapp.com"}),w=function(){return A.get(n.Goods)},N=function(t,e){return A.post(n.Cart,{addedCart:t,values:e})},k=function(t,e){var r=JSON.stringify(t);localStorage.setItem(e,r)};!function(t){t.productsPlannedForPurchase="addedProduct"}(b||(b={}));var E=b.productsPlannedForPurchase,F=Object(f.b)("shoppingCart/buy",function(){var t=Object(g.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N(e.addedCart,e.values));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),I=Object(f.c)({name:"cart",initialState:{sumPrice:0,cartContents:[],isPurchaseMade:!1},reducers:{setCart:function(t,e){var r=e.payload.addProduct;t.cartContents=[].concat(Object(v.a)(t.cartContents),[r]),t.sumPrice=t.cartContents.reduce((function(t,e){return t+e.price}),0),k(t.cartContents,E)},deleteCart:function(t,e){t.cartContents=t.cartContents.filter((function(t){return t.id!==e.payload.id})),k(t.cartContents,E)},totalPrice:function(t){t.sumPrice=t.cartContents.reduce((function(t,e){return t+e.price}),0)},subtractCart:function(t,e){t.cartContents.map((function(r){return r.id===e.payload.id&&(r.price-=r.price/r.toPurchase,r.toPurchase-=1),t})),k(t.cartContents,E)},addProductInCart:function(t,e){t.cartContents.map((function(t){var r=e.payload;return t.id===r.id&&(t.price+=t.price/t.toPurchase,t.toPurchase+=1),t})),t.sumPrice=t.cartContents.reduce((function(t,e){return t+e.price}),0),k(t.cartContents,E)},conditionBuy:function(t,e){t.isPurchaseMade=e.payload.result}},extraReducers:function(t){t.addCase(F.fulfilled,(function(t,e){t.isPurchaseMade=e.payload.data,t.cartContents=[],t.sumPrice=t.cartContents.reduce((function(t,e){return t+e.price}),0),k(t.cartContents,E)}))}}),L=I.reducer,B=I.actions,D=B.setCart,S=B.totalPrice,_=B.subtractCart,G=B.addProductInCart,M=B.deleteCart,R=B.conditionBuy,V=r(23),z=r.p+"static/media/6-1000x1000.9c0a3947.jpg",T=r.p+"static/media/6064641689.2e40e89d.jpg",U={result:"",data:[],imgArr:[{id:1,photo:z},{id:2,photo:r.p+"static/media/680395566_w640_h640_kruzhka-s-prikolom.6603be42.jpg"},{id:3,photo:T},{id:4,photo:r.p+"static/media/kruzhka_sgushchenka_img.d966e552.webp"},{id:5,photo:r.p+"static/media/people_2_mug_chameleon_front_whitered_500.8f503f2c.jpg"},{id:6,photo:r.p+"static/media/pic1white.1ea6d9b1.jpg"},{id:7,photo:r.p+"static/media/product_57508_0_0_0.5fd91d27.jpg"}]},W=Object(f.b)("goods/goodsAll",function(){var t=Object(g.a)(C.a.mark((function t(e,r){var n,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:return n=t.sent,c=n.data,r.dispatch(S()),t.abrupt("return",{data:c});case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),Y=Object(f.c)({name:"goods",initialState:U,reducers:{},extraReducers:function(t){t.addCase(W.fulfilled,(function(t,e){t.data=e.payload.data.map((function(e){var r=t.imgArr.find((function(t){return t.id===e.id}));return r&&(e=Object(V.a)(Object(V.a)({},e),{},{photo:r.photo})),e}))}))}}).reducer,q=Object(O.b)({goods:Y,cart:L}),K=Object(f.a)({reducer:q,middleware:function(t){return t().prepend(x.a)}});window.store=K;var H=function(){return Object(d.b)()},Q=d.c,J=function(t){return t.cart.sumPrice},Z=function(t){return t.cart.cartContents},$=function(t){return t.goods.data},X=function(t){return t.cart.isPurchaseMade},tt=function(t){return t.goods.data},et=function(){var t=H(),e=Q(Z),r=Q(J);Object(a.useEffect)((function(){t(S())}),[e]);var n=function(e){t(_({id:e}))},i=function(e){t(M({id:e}))},o=function(e){t(G({id:e}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"shopping list:"}),Object(m.jsx)("div",{style:{padding:"20px"},children:e.map((function(t){var e=t.id,r=t.name,c=t.price,a=t.photo,s=t.toPurchase;return Object(m.jsx)(h,{name:r,price:c,picture:a,id:e,toPurchase:s,onRemoveProductInCart:n,onAddItemToCart:o,onDeleteProductFromCart:i},e)}))}),Object(m.jsx)("div",{children:r!==c.Empty&&Object(m.jsxs)("span",{children:["amount to pay: ",r]})})]})},rt=r(157),nt=r(152),ct=r(155),at=r(158),it=r(156),ot=r(79),st=Object(a.memo)((function(t){var e=t.mediaStyle,r=H(),n=Q(Z),c=Object(ot.a)({initialValues:{firstLastName:"",cardNumber:"",expirationDate:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.cardNumber?19===t.cardNumber.length&&/^[0-9]+ [0-9]+ [0-9]+ [0-9]{4}$/i.test(t.cardNumber)||(e.cardNumber="Invalid card number"):e.cardNumber="Required",t.firstLastName?/^[A-Z]+ [A-Z]{2,20}$/i.test(t.firstLastName)||(e.firstLastName="Invalid firstLastName"):e.firstLastName="Required",t.expirationDate?5===t.expirationDate.length&&/^[0-9]+\/[0-9]{2}$/i.test(t.expirationDate)||(e.expirationDate="Invalid expirationDate"):e.expirationDate="Required",t.password?/^[0-9]{3}$/i.test(t.password)||(e.password="Invalid password"):e.password="Required",e},onSubmit:function(t){r(F({addedCart:n,values:t})),c.resetForm()}});return Object(m.jsx)(rt.a,{style:{paddingLeft:"50px"},children:Object(m.jsx)("form",{onSubmit:c.handleSubmit,style:e,children:Object(m.jsxs)(nt.a,{children:[Object(m.jsx)(ct.a,Object(V.a)({variant:"outlined",type:"tel",label:"0000 0000 0000 0000",margin:"normal"},c.getFieldProps("cardNumber"))),c.touched.cardNumber&&c.errors.cardNumber&&Object(m.jsx)("div",{style:{color:"red"},children:c.errors.cardNumber}),Object(m.jsx)(ct.a,Object(V.a)({variant:"outlined",label:"IVAN IVANOV",margin:"normal"},c.getFieldProps("firstLastName"))),c.touched.firstLastName&&c.errors.firstLastName&&Object(m.jsx)("div",{style:{color:"red"},children:c.errors.firstLastName}),Object(m.jsx)(ct.a,Object(V.a)({variant:"outlined",label:"00/00",margin:"normal"},c.getFieldProps("expirationDate"))),c.touched.expirationDate&&c.errors.expirationDate&&Object(m.jsx)("div",{style:{color:"red"},children:c.errors.expirationDate}),Object(m.jsx)(ct.a,Object(V.a)({variant:"outlined",label:"000",margin:"normal"},c.getFieldProps("password"))),c.touched.password&&c.errors.password&&Object(m.jsx)("div",{style:{color:"red"},children:c.errors.password}),Object(m.jsx)(at.a,{label:"remember me",control:Object(m.jsx)(it.a,Object(V.a)({},c.getFieldProps("rememberMe"))),checked:c.values.rememberMe}),Object(m.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:"buy"})]})})})})),dt=r(7),ut=r(57),lt=r.n(ut),jt=Object(a.memo)((function(t){var e=t.mediaStyle;return Object(m.jsx)("div",{className:lt.a.container,children:Object(m.jsx)("div",{style:{display:"flex"},children:Object(m.jsxs)("div",{style:e,children:[Object(m.jsx)(et,{}),Object(m.jsx)(st,{mediaStyle:e})]})})})})),pt=r(30),bt=Object(a.memo)((function(){return Object(m.jsxs)(dt.c,{children:[Object(m.jsx)(dt.a,{path:n.Goods,element:Object(m.jsx)(yt,{})}),Object(m.jsx)(dt.a,{path:n.Cart,element:Object(m.jsx)(mt,{})})]})})),mt=function(){var t=H(),e=Object(dt.f)(),r=Q(X),c=function(){var t=Object(a.useState)(window.matchMedia("(min-width: 550px)").matches),e=Object(pt.a)(t,2),r=e[0],n=e[1];return Object(a.useEffect)((function(){window.matchMedia("(min-width: 550px)").addEventListener("change",(function(t){return n(t.matches)}))}),[r]),{matches:r}}(),i=c.matches?{display:"flex"}:{display:"block"};return Object(a.useEffect)((function(){t(R({result:!1}))}),[r]),r&&e(n.Goods,{replace:!0}),Object(m.jsx)("div",{children:Object(m.jsx)(jt,{mediaStyle:i})})},ht=Object(a.memo)((function(t){var e=t.sumPrice;return Object(m.jsxs)("div",{children:[Object(m.jsx)(u.b,{to:n.Goods,style:{textDecoration:"none"},children:Object(m.jsx)(p.a,{color:"inherit",children:Object(m.jsx)("p",{style:{color:"#fff"},children:"Goods"})})}),Object(m.jsx)(u.b,{to:n.Cart,style:{textDecoration:"none"},children:Object(m.jsxs)(p.a,{color:"inherit",children:[Object(m.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAABN0lEQVRIx2NgGM7gf/1/GFhMLYN+/1egjkH//0+h3IPO/0kHt/4rYTPqJBlGFWIzKIBkY/7818ZmEOP/K2DpSoLBwPj/LFjlHFwKYsHSL/9zEjAoBqzuy38pXApY/t8HK8nBawzH/4dgVU34FGWBlTz4z4pHTTlYzYv/PPhtew5WFo9Thcj/D2AVGYQCEmLftf+MOOQnQuVZCBnE9/89WGkQVlmV/z/Bsr7EpPEWqJ31WOARsNwB4jKLLYFk+O+/CXEGbSdgUANxxrhCC5QWrF6r+G9FnDFM/y+ADZpJaWFiAzbm838JSg0qBBt0Eau3UKEDfoO8iC5C6gkVEKupYhA4uD3/11HsNWrWcibAbPAZiE1Il0VWKP7/LTQM3mEmAfyyqEqTkIIzlTRZGhlELa9RLbCHEwAAzDjcMcF63UIAAAAASUVORK5CYII=",alt:"cart"}),e!==c.Empty&&Object(m.jsx)("p",{style:{color:"#fff"},children:e})]})})]})})),ft=function(){var t=Q(J);return Object(m.jsx)(ht,{sumPrice:t})},Ot=Object(a.memo)((function(t){var e=t.photo,r=t.onBuyProductButton,n=t.name,c=t.price,i=Object(a.useCallback)((function(){r()}),[r]);return Object(m.jsxs)("div",{style:{padding:"20px"},children:[Object(m.jsx)("img",{src:e,alt:"product_photo",style:{width:"300px",height:"300px"}}),Object(m.jsx)("p",{children:n}),Object(m.jsx)("h3",{children:c}),Object(m.jsx)(p.a,{variant:"contained",color:"primary",onClick:i,children:"buy"})]})})),xt=Object(a.memo)((function(t){var e=t.photo,r=t.id,n=t.name,c=t.price,a=H(),i=Q(Z),o=Q(tt);return Object(m.jsx)(Ot,{name:n,photo:e,price:c,onBuyProductButton:function(){var t=i.some((function(t){return t.id===r})),e=o.find((function(t){return t.id===r}));return t?a(G({id:r})):e?a(D({addProduct:e})):void 0}})})),vt=function(t){var e=t.allProducts;return Object(m.jsx)("div",{style:{display:"flex",justifyContent:"space-around"},children:Object(m.jsx)("div",{className:lt.a.container,children:e.map((function(t){var e=t.photo,r=t.name,n=t.id,c=t.price;return Object(m.jsx)(xt,{photo:e,name:r,id:n,price:c},n)}))})})},yt=function(){var t=Q($);return Object(m.jsx)(vt,{allProducts:t})},Ct=function(){var t=H();return Object(a.useEffect)((function(){(function(t){var e=localStorage.getItem(t);return null!==e?JSON.parse(e).filter((function(t){return null!==t})):[]})(b.productsPlannedForPurchase).map((function(e){return t(D({addProduct:e}))})),t(W())}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(l.a,{position:"static",children:Object(m.jsx)(j.a,{style:{display:"flex",justifyContent:"flex-end"},children:Object(m.jsx)(ft,{})})}),Object(m.jsx)(bt,{})]})},gt=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,160)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;r(t),n(t),c(t),a(t),i(t)}))};s.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(u.a,{children:Object(m.jsx)(d.a,{store:K,children:Object(m.jsx)(Ct,{})})})}),document.getElementById("root")),gt()},57:function(t,e,r){t.exports={container:"Container_container__2SB1r"}},90:function(t,e,r){}},[[120,1,2]]]);
//# sourceMappingURL=main.8b15af47.chunk.js.map